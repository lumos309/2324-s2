# Lab 06 Mini Problem

## Learning Objectives

- Students can use the `Maybe<T>` class in their code.
- Students can write functional-style code.

## Mini Problem 1: Maybe I can get good grades
Now that we have our `Maybe` class, let's try to use it to do something more meaningful.  

It is a common idiom (although not a good one) for a method to return a value if successful and return a `null` otherwise.  It is up to the caller to check and make sure that the return value is not `null` before using it, to prevent receiving a run-time `NullPointerException`.

One example of this is the `Map<K,V>` implements in Java.  You have seen above that `Map::get` returns `null` if the key that you are looking for does not exist.

We have given you a program `Lab06Mini1.java` that uses multiple layers of `Map` to store information about students, their modules, and their assessment grades.  There is a method `getGrade` that, given this map, a student, a module, and an assessment, look up the corresponding grade.  There are multiple checks if a returned value is `null` in this method.

Our new `Maybe<T>` class provides a good abstraction for the returned value from `Map::get` since the value returned is either some value or none!

Your task is to modify `getGrade` so that it uses `Maybe<T>` instead:

- Declare and initialize two `Transformer` instances using anonymous classes
- Use the two `Transformers`, `Maybe::of`, `Maybe::flatMap`, and `Maybe::orElse` to achieve the same functionality as the given `getGrade` in a _single return statement_.
- Your code should not have any more conditional statements or references to `null`.

In the folder, we have included a folder called `cs2030s` that contains the `cs2030s/fp` package. Inside, you will see a collections of Java classes, which are the byte code generated by the compiler. These byte code contains a correct implementation of the `Maybe` class you need for this exercise. In your code, you can simply include them using the import statement `import cs2030s.fp.Maybe;`.

## Mini Problem 2: Maybe I can earn a lot of money 
This mini problem is adapted from CS2030S AY2022-23 Semester 2 PE 2.

You are given three classes: `Pair`, `Account` and `Bank`. You should read the given source codes to understand the behavior of each class and their interaction with each other. 

Your task is simply to remove all conditional statements and all reference to `null` in the `transfer` method inside the `Bank` class (reproduced below):
```java
class Bank {
  // ... fields and other methods omitted ...
  void transfer(int from, int to, double amount) {
    Account fromAccount = findAccount(from);
    Account toAccount = findAccount(to);
    if (fromAccount != null && toAccount != null && fromAccount.getBalance() >= amount &&
        !fromAccount.isClosed() && !toAccount.isClosed()) {
      fromAccount.transferTo(toAccount, amount);
    }
  }
}
```
This is a given, but the behavior of your code should not change after rewriting the implementation.

**Hint:** Your implementation should look something like this:
```java
Maybe<> fromAccount = ...;
Maybe<> toAccount = ...;
fromAccount.something(...);
```
**Follow up**: How would you change your implementation if `Account` class were immutable? What other steps do you need to do to update the state of the `Bank`?